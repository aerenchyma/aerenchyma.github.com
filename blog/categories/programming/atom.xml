<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: programming | aerenchyma]]></title>
  <link href="http://aerenchyma.github.io/blog/categories/programming/atom.xml" rel="self"/>
  <link href="http://aerenchyma.github.io/"/>
  <updated>2014-12-26T16:18:03-05:00</updated>
  <id>http://aerenchyma.github.io/</id>
  <author>
    <name><![CDATA[Jackie Cohen]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[exploring data part I: Principal Component Analysis]]></title>
    <link href="http://aerenchyma.github.io/blog/2014/01/29/data-exploration-i-pca/"/>
    <updated>2014-01-29T14:48:00-05:00</updated>
    <id>http://aerenchyma.github.io/blog/2014/01/29/data-exploration-i-pca</id>
    <content type="html"><![CDATA[<h3>what's going on here</h3>

<p>My math background isn't extensive. It's continually increasing, because I'm interested in data: this is how I've learned linear algebra and what I know about differential equations; I find conceptual problems I need them for and I ask a lot of questions and I read a lot of things. I write a bunch of code that doesn't work. And then I talk to people and eventually I write code that does work, and then I figure out why it works, and next time similar problems are easier.</p>

<p>"Why" sounds like a silly question to some people, I think. Not because it's not useful, but because, well, <em>maybe it should be obvious why.</em> I disagree with that under most circumstances. It's not silly; exploratory data analysis is all about doing the what to move toward the why. 'Why' is a big deal.</p>

<p>I spend a lot of time thinking about datasets and their context(s), at work and otherwise, and, inspired by <a href="http://www.harihareswara.net/sumana/2013/11/06/0">some</a> <a href="http://jvns.ca/blog/2013/10/07/day-5-i-wrote-a-kernel-module/">people</a> <a href="http://blog.nullspace.io/building-search-engines.html">I</a> <a href="http://blog.lazerwalker.com/blog/2013/12/24/one-post-a-week-running-an-iron-blogger-challenge/">know and read</a>, I thought I'd share the brief explanation of what helped me start to understand the differences between PCA, EFA, and k-means clustering, and why you might use each.</p>

<p>I'll be glossing over details, but I'm going to talk about each, and then compare them and offer some examples that help me.</p>

<h3>useful background</h3>

<ul>
<li><a href="http://en.wikipedia.org/wiki/Correlation">Correlation</a></li>
<li><a href="http://en.wikipedia.org/wiki/Vector_space">Vectors</a></li>
<li><strong><a href="http://en.wikipedia.org/wiki/Eigenvalues_and_eigenvectors">Eigenvectors</a></strong></li>
<li><a href="http://en.wikipedia.org/wiki/K-means_clustering">k-means Clustering</a></li>
</ul>


<h3>what it does</h3>

<p><a href="http://en.wikipedia.org/wiki/Principal_component_analysis">PCA</a> is usually used to explain variation of data, in just a very few dimensions (say 2-3).</p>

<p>You're basically finding the most <em>important</em> eigenvectors, the ones that capture the largest amount(s) of variation in your data.</p>

<p>When you use PCA, you're basically asking two questions:</p>

<ol>
<li><p><strong>Where does my data vary most?</strong></p></li>
<li><p><strong>OK, knowing that, where's the rest of the variation in the data?</strong></p></li>
</ol>


<p>And overall, <strong>How can I explain the variation in my data in as few different ways as possible?</strong></p>

<p>You're using <a href="http://en.wikipedia.org/wiki/Orthogonal_matrix">orthogonal transformation</a> when you do PCA. So you're looking at <em>uncorrelated</em> factors that explain variation. (If you want to look at variables you suspect are correlated and dive into explanations, you'd want to do some Exploratory Factor Analysis.)</p>

<p>It's useful primarily for</p>

<ul>
<li>summarizing datasets: by figuring out how many factors explain most of the variation in a dataset</li>
<li>compressing datasets: picking out a factor which captures the majority of the variation in the data such that you don't have to store as much about the dataset and still capture what's interesting about it.</li>
</ul>


<!--more-->


<h3>when you'd use it</h3>

<p>Say you have a huge, very skinny, set of data points. For example, a set of students who all have grades for biology, for chemistry, and for neuroscience lab, and are ranked by how well they're doing in their classes. (I'm really not into ranking by grades. Because it's usually a bad idea. But that's another topic entirely.) You want a way to rank the students by approximate grade point average, and you want to know what is the best determining factor to look at to get there.</p>

<p>In practice, let's say there's a lot more variety in the biology grades than the other two. It's not exactly a straight line, because there's still some variety in the chemistry grades and the neuroscience grades, but not nearly as much as there are in the bio grades. So the distribution of points is very visually skinny: you don't <em>really</em> need PCA to figure this out, because you can see where the biggest variety is. Or maybe you only have 20 students in all the classes, and you can just ask around and sort of figure this out. OK. That's fine.</p>

<p>But if your datasets reach a certain size, you can't tell on glimpse where the largest amount of variation is. If there are fifty million students you're looking at, and they're all somehow taking classes in these same three subjects, and you want to know what to start looking at to explain variation in their overall GPA rankings, maybe the point set is big enough you can't just tell where the largest amount of variation is. That's where PCA comes in.</p>

<p>Let's say also, for the sake of the example, that there's definitely more variety in the chemistry grades than in the neuroscience grades, it's just not nearly as dramatic as the variation in the biology grades. OK, cool. We're probably going to get the most information about a student's grade ranking from looking at their biology grade, but that won't totally explain our data. It helps but it's not as helpful as it could be. (We'll come back to this.)</p>

<h3>pca and compression</h3>

<p>Because it draws out these <em>principal</em> components, or factors, of a multifaceted dataset, PCA is also useful for compression. Why compression? Well, what if one particular factor was really the best explanation of a dataset?</p>

<p>Say you had 10x2.789<sup>17</sup> data points for two variables. Maybe you have 10x2.789<sup>17</sup> coordinate pairs. That's a lot.</p>

<p>But then you find that there's one eigenvector that describes this data pretty well, in the whole scheme of things. Performing principal component analysis pulls out this eigenvector, and then you can summarize your huge dataset not with 10x2.789<sup>17</sup> * 2 coordinate points, but with 1 eigenvector and 10x2.789<sup>17</sup> points on it, marking where along that eigenvector your various datapoints stand. You lose the information in other dimensions of the dataset besides that one, but maybe they're not that comparatively important. It's just like compression in other filetypes, images or music. You lose some quality. Some information. But it's comparatively unimportant enough that you only notice when you blow the image up to a really huge size, or if you play the song through really quality speakers. When you're looking at the image on your phone, playing the song off your computer, or want to be able to explain a dataset in relatively simple terms, the compressed version is not only fine, it's sometimes better. (For one thing, if you stored songs on an iPhone with a much higher quality than .mp3s, you'd be able to carry a lot fewer songs around with you.)</p>

<p>You can use PCA to pick out the one eigenvector that helps explain your dataset. If that's good enough -- there you go, you have the .mp3-esque version of the dataset, with all the stuff you need to know for your analysis (like on your phone with .mp3s, you have all the data you need to hear the song just fine).</p>

<h3>what it means (kinda)</h3>

<p>In our somewhat impractical student example here, let's answer PCA question <strong>#1:</strong>
OK, my data varies most with respect to biology grades. But I mean, I'm not sure the dataset is 'skinny' enough to suggest that I can capture enough information about overall grade ranking to summarize the dataset by looking only at biology grade variation. Is there another factor going on here that could help me? So,</p>

<p><strong>#2:</strong> The second biggest amount of variation is happening among chemistry grades.</p>

<p>Maybe if we want to explain the data about student ranking by grades, the <em>Principal Components</em> of our analysis are biology class grades and chemistry class grades. Those are the best ways to explain the student grade data overall. Knowing this, we could study biology classes or methods of student studying for biology exams, for instance, and try to figure out where that variation is coming from.</p>

<p>PCA won't answer the ultimate whys for a dataset. (It doesn't spit out "chemistry grades" -- the human has to know what factors are playing here.) But it gives us a tool to figure out what <em>principle components</em> of a complex dataset are: it finds the eigenvectors in a dataset with the heaviest weights.</p>

<h3>next up</h3>

<p>PCA is basically a subset of Exploratory Factor Analysis (EFA), which is used less for this summarizing and compression and more for <em>exploring,</em> trying to find a model that fits the data. Often, you'd use PCA if you suspected that model will fit your dataset well: there are probably just a couple factors that can mainly explain the data you've got.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Here at the edge]]></title>
    <link href="http://aerenchyma.github.io/blog/2013/05/25/here-at-the-edge/"/>
    <updated>2013-05-25T21:13:00-04:00</updated>
    <id>http://aerenchyma.github.io/blog/2013/05/25/here-at-the-edge</id>
    <content type="html"><![CDATA[<p><a href="http://www.powells.com/biblio/9780872863323"><em>Close to the Machine</em></a> was published in 1997, which was also the year I first (technically) got access to the Internet and eleven years before I seriously thought about programming myself.</p>

<p>I came across the memoir in 2013, after Ellen Ullman's op-ed <a href="http://nyti.ms/10UrtAc">How to Be a 'Woman Programmer'</a> was published in the New York Times on May 18.</p>

<!-- more -->


<p>The second line of that op-ed reads <em>I wrote code that ran at the levels between flashy human interfaces and the deep cores of operating systems, like the role of altos in a chorus, who provide the structure without your taking much notice of their melodic lines</em>, and I was instantly fascinated. I am interested in all the things she mentions in that sentence, but altos-in-a-chorus-y scripts I recognize as the kind of programming that, so far at least, brings me the most joy. (It's a tough choice.)</p>

<p>This is for reasons Ullman talks about. Describing sitting at a table with clients for a "city-wide database for AIDS service providers," she writes about the disconnect between she herself, a senior programmer tasked with building this system, and the other people around the table: runners of clinics, doctors, dentists, hospice directors. <em>I was there at the edge,</em> she writes, <em>the interface of the system, in all its existence, to the people, in all their existence.</em><sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup></p>

<p>Right now, that's the most thrilling thing for me about <em>being a programmer</em>, and also the most frustrating. There is so much knowledge I learnt over years that I wish I could convey in a matter of minutes. But my ability to make something that I <em>know</em> makes someone's life easier, watch them use it, and make it better for their use, never gets old.</p>

<p>Still: I don't know others' jobs better than they do. Maybe <em>I</em> think a command-line script will solve a lot of problems but it won't help if the users-to-be are confused by "the command line." And maybe I'm <em>wrong.</em> <a href="https://medium.com/close-to-the-machine/8c2d491886fa">Diana Kimball wrote about arrogance and obsession</a>, and how arrogance can be a tool. This resonates with me. (Sometimes, I'm right.) But the same kind of obsession that makes me happy also scares me. I've walked away from conversations about problem-solving feeling like an ass. <em>I talked, asked questions, but I saw I was operating at a different speed from the people at the table,</em> Ullman writes.<sup id='fnref:2'><a href='#fn:2' rel='footnote'>2</a></sup> That's familiar. Sometimes I'm focusing on a detail that is important for the <em>database</em> but not the users. Sometimes I'm rushing ahead -- this platform, that language, yes yes yes... What?</p>

<p>Many of these tools to switch on are incredibly useful in programming but the opposite when explaining, and so walking the line between the technical and the non-technical (these are terms I hesitate to use) -- say, teaching programming, or working on tech systems for a multi-disciplinary organization -- means careful attention is important. What are my assumptions (today)?</p>

<p>Ellen Ullman gives voice to a lot of the things that scare me, and a lot of the things that I find incredibly exciting. <em>In . . . software engineering, there is something almost shameful in this helpful, social-services system we're building. The whole project smacks of . . . people who just want to use the stuff we write and don't care how we did it.</em><sup id='fnref:3'><a href='#fn:3' rel='footnote'>3</a></sup> I think that I understand what this says, but I don't feel good about understanding it. Yet also, I love that I kind of get it. <em>We had started with some scratchings on a white-board and built this: this operational program, this functional thing.</em><sup id='fnref:4'><a href='#fn:4' rel='footnote'>4</a></sup> That realization, that's <em>amazing.</em> Every time.</p>

<p>I finished <em>Close to the Machine</em> a couple days ago -- a quick read, and one I enjoyed -- and I'm still thinking about it because of precisely this problem. Computer Science often revolves around complexity, but complexity is definitely not unique to it. I talk to my friend, a manager at a non-profit organization, about how a script could speed up tasks. Together, we write something that brings one process from months to days long, but just because programming can speed things up does not mean there isn't always more.</p>

<p>Programming is an <em>awesome</em> tool and also an awesome, awesome practice. But while I believe there is an huge amount of value in all stripes of Computer Science and programming as disciplines -- and do I ever, especially when it's approached the way <a href="http://bit.ly/ZlCrEw">it is at Hacker School</a> -- I also think programming's value depends a great deal on domain expertise. Its use as an awesome tool depends often on the experiences of hospice directors and doctors and runners of clinics. The knowledge of economists, and leaders of campaigns against hunger, and linguists doing fieldwork. Its value is, in my opinion, multiplied exponentially by experience -- not just experience programming, but experience of how an medical clinic worker goes about their day, for instance.</p>

<p>The value of programming depends on willingness to listen. Listening to other programmers is important, but also keeping one foot out of <em>the universe where two human beings can simultaneously understand the statement 'if space is numeric!'</em> matters, sometimes.<sup id='fnref:5'><a href='#fn:5' rel='footnote'>5</a></sup> And yet often the best work is done when absorbed in that universe. These facts coexist, and Ullman's work is one of the first (non-tweet) things I've read that acknowledges this.<sup id='fnref:6'><a href='#fn:6' rel='footnote'>6</a></sup></p>

<p>I liked spending hours in a beige classroom scribbling logic on a chalkboard with other people -- as Ullman puts it, <em>other weird logic-dreamers like myself.</em> It's something I love about programming, and something I loved about <a href="http://www.hackerschool.com/about">Hacker School</a>: there's always more. There's certainly happiness in belonging to a group of people who love something, but there's a danger in homogenizing that love in your head. Because it makes it very easy, then, to keep people <em>out</em> instead of bringing people in. There are infinite kinds of experience, and equally many ways to love something.</p>

<p>If everyone were "a programmer" first, little to nothing would ever get done outside that numeric space universe.</p>

<p>But if more people were "a programmer" by varied definitions, or offered the opportunity to be if they want -- the opportunity to truthfully say 'I've read a line or more of code'? 'I've written a short program'? 'I understand possibilities this tool could offer me'? 'I am committed to making sure a new system works for the people who will need to <em>use</em> it'? 'I will talk to people in technological domains about the complexity <em>I</em> am faced with and hope we can reach common ground', or something else -- then, I think more <em>would</em>. I've seen firsthand that it's useful and interesting to hear about types of complexity I'm unfamiliar with. It isn't because I am a programmer. And this: <em>We build the system, we live in its midst, and we are changed.</em><sup id='fnref:7'><a href='#fn:7' rel='footnote'>7</a></sup> That's certainly not unique to programmers, but I think it's <em>common</em> to them.</p>

<p>That's pretty cool.</p>

<hr />

<p><div class="footnotes">
	<ol>
		<li id='fn:1'><p> Ullman, Ellen. <u>Close to the Machine</u>. Picador: USA. 1997; 2012 reprint. p 12.
<a href='#fnref:1' rev='footnote'>↩</a></p>
</li><li id='fn:2'><p> <em>Ibid.</em>
<a href='#fnref:2' rev='footnote'>↩</a></p>
</li><li id='fn:3'><p> <em>Ibid,</em> p 9.
<a href='#fnref:3' rev='footnote'>↩</a></p>
</li><li id='fn:4'><p> <em>Ibid,</em> p 173.
<a href='#fnref:4' rev='footnote'>↩</a></p>
</li><li id='fn:5'><p> <em>Ibid,</em> p 2.
<a href='#fnref:5' rev='footnote'>↩</a></p>
</li><li id='fn:6'><p> I'm sure there are others/similar and welcome recommendations
<a href='#fnref:6' rev='footnote'>↩</a></p>
</li><li id='fn:7'><p> <em>Ibid,</em> p 30.
<a href='#fnref:7' rev='footnote'>↩</a></p>
</li>
	</ol>
</div>
</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[remote lighting]]></title>
    <link href="http://aerenchyma.github.io/blog/2013/04/21/remote-lighting/"/>
    <updated>2013-04-21T12:01:00-04:00</updated>
    <id>http://aerenchyma.github.io/blog/2013/04/21/remote-lighting</id>
    <content type="html"><![CDATA[<p>This past Friday, I joined forces with a friend for a fun remote lighting project using a Raspberry Pi.</p>

<p>Remote lighting? you say. You know the colored stage lights you see in theatres? If you ever did tech for a production in high school in a small theatre without super-intense equipment, those are the ones we used. They were hooked up via <a href="http://en.wikipedia.org/wiki/DMX_(lighting">DMX</a> ). (See <a href="http://www.opendmx.net/index.php/OLA_Python_API">here</a> for more information about the Python API, which we used.)</p>

<p>Some of these lights were hooked up to a Pi, and the idea was that we would be able to pass a color (e.g. on a color wheel like you might see in Photoshop), and brightness, via a web interface, which would then set the lights on as specified.</p>

<p>Below is the how and the what, and the code. All you need to make this happen is the appropriate lights and wiring (I didn't do this part, so I can't speak to it), a Raspberry Pi, set up with wireless, and a computer with monitor and keyboard input/a laptop that can also access the wireless network.</p>

<!--more-->


<h2>the setup</h2>

<p>We had 4 "normal" lights, and 1 special case light. Each of the four normal lights had four input/output channels. The fifth "special case" light had five channels.</p>

<p>All of them had channels <code>brightness</code>, <code>red</code>, <code>blue</code>, and <code>green</code>. The special case light (a light sort of but not exactly like <a href="http://www.alibaba.com/product-gs/693385417/DMX_18x10W_RGBW_4IN1_Multi_color.html">this</a>) had these four channels, plus a <code>rotation</code> channel.</p>

<p>Each of these channels accepted an integer from 0 - 255 (8-bit encoding).</p>

<p>In the case of each of the colors (red, blue, green), the integers <a href="http://en.wikipedia.org/wiki/RGB_color_model#Additive_primary_colors">represented the color amounts</a> -- for example, <code>red, green, blue = 0, 0, 255</code> would make a light shine pure blue light. <code>red, green, blue = 100, 0, 155</code> would probably result in some shade of purple light.</p>

<p>For the brightness parameter, the 0 - 255 scale was pretty intuitive: 0 meant off, 255 was the brightest the light would go.</p>

<p>And for the special case, the 0 - 255 scale represented the speed of rotation, from off to the fastest it would rotate, about once per second or so (this light also has a flashing option as well as rotation of the beams, but we decided not to include that as an option because the flashing, like strobe lighting, is annoying if not dangerous-for-some).</p>

<p>All five of these lights were hooked up to the Pi and all the appropriate information sent to them, via the Pi. (Of course, being allowed to turn on the rotate option does not make sense if the special case is turned off, but we decided to overlook that for two reasons: (a) the users were only those of us making it, and especially (b) turning rotate on and the special case off was senseless, but would not break anything.)</p>

<h2>the how</h2>

<p>We needed to create the server:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">SocketServer</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">class</span> <span class="nc">MyTCPHandler</span><span class="p">(</span><span class="n">SocketServer</span><span class="o">.</span><span class="n">StreamRequestHandler</span><span class="p">):</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="k">def</span> <span class="nf">handle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>    <span class="c"># self.rfile is a file-like object created by the handler</span>
</span><span class='line'>    <span class="c"># we can now use e.g. readline() instead of raw recv() calls</span>
</span><span class='line'>    <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rfile</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span class='line'>    <span class="k">print</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="c"># see what&#39;s going on</span>
</span><span class='line'>    <span class="n">list_vals</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;,&quot;</span><span class="p">)]</span>
</span><span class='line'>    <span class="n">lights_start</span><span class="p">(</span><span class="o">*</span><span class="n">list_vals</span><span class="p">)</span>
</span><span class='line'>    <span class="c"># Likewise, self.wfile is a file-like object used to write back to the client</span>
</span><span class='line'>    <span class="bp">self</span><span class="o">.</span><span class="n">wfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;YES&quot;</span><span class="p">)</span> <span class="c"># acknowledge something&#39;s happening</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>The function in line 10 there, and the functionality from lines 7-9, I'll address shortly.</p>

<p>And at the bottom of the script,</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">HOST</span><span class="p">,</span> <span class="n">PORT</span> <span class="o">=</span> <span class="s">&quot;0.0.0.0&quot;</span><span class="p">,</span> <span class="mi">9999</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">Create</span> <span class="n">the</span> <span class="n">server</span><span class="p">,</span> <span class="n">binding</span> <span class="n">to</span> <span class="n">localhost</span> <span class="n">on</span> <span class="n">port</span> <span class="mi">9999</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">server</span> <span class="o">=</span> <span class="n">SocketServer</span><span class="o">.</span><span class="n">TCPServer</span><span class="p">((</span><span class="n">HOST</span><span class="p">,</span> <span class="n">PORT</span><span class="p">),</span> <span class="n">MyTCPHandler</span><span class="p">)</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">server</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>We also needed to use the <a href="http://www.opendmx.net/index.php/OLA_Python_API">OLA Python API</a> to deal with DMX, which was a simple matter of inspecting and copying over code.</p>

<p>At the top of the file,</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">array</span> <span class="c"># data must be transmitted to DMX in an array</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">ola.ClientWrapper</span> <span class="kn">import</span> <span class="n">ClientWrapper</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>And then, to instantiate a ClientWrapper for OLA and defining a function to deal with it:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">wrapper</span> <span class="o">=</span> <span class="n">ClientWrapper</span><span class="p">()</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">def</span> <span class="nf">DmxSent</span><span class="p">(</span><span class="n">state</span><span class="p">):</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="n">wrapper</span><span class="o">.</span><span class="n">Stop</span><span class="p">()</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Next, a function to turn on the lights. We assumed we would always want the same color coming from each of the four (or five) lights.</p>

<p>Per the DMX specifications, the data structure we needed to pass was an array (a real array, not a Python list) with values in order for each lights. So the first four integer values in the array corresponded to the values for one normal light: <em>brightness, red, green, blue</em> values. The second would be the same four values, for the second normal light, etc. The special case light came last, in the order <em>brightness, red, green, blue, rotation</em>.</p>

<p>But just appending one after another was easy to lose track of and not pretty. Hence the function:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">lights_do</span><span class="p">(</span><span class="n">bright</span><span class="p">,</span> <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span><span class="p">,</span> <span class="n">rotate</span><span class="p">,</span> <span class="n">sp</span><span class="p">):</span> <span class="c"># the sp parameter is 0 or 1 and indicates whether the special case light goes on or not&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="n">universe</span> <span class="o">=</span> <span class="mi">1</span> <span class="c"># this is required by DMX -- the lights are essentially attributes of &#39;universe 1&#39;</span>
</span><span class='line'><span class="n">data</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">)</span> <span class="c"># also required; see the OLA Python API specs</span>
</span><span class='line'><span class="n">light_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">bright</span><span class="p">,</span> <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span><span class="p">,</span> <span class="n">rotate</span><span class="p">]</span>
</span><span class='line'><span class="n">normal_light</span> <span class="o">=</span> <span class="n">light_data</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c"># for extra clarity</span>
</span><span class='line'><span class="n">tmp</span> <span class="o">=</span> <span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">normal_light</span><span class="o">*</span><span class="mi">4</span><span class="p">]</span>
</span><span class='line'><span class="k">if</span> <span class="n">sp</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span class='line'>    <span class="n">tmp</span> <span class="o">=</span> <span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">light_data</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="n">client</span> <span class="o">=</span> <span class="n">wrapper</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span> <span class="c"># wrapper, above, is global in this script</span>
</span><span class='line'><span class="n">client</span><span class="o">.</span><span class="n">SendDmx</span><span class="p">(</span><span class="n">universe</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">DmxSent</span><span class="p">)</span>
</span><span class='line'><span class="n">wrapper</span><span class="o">.</span><span class="n">Run</span><span class="p">()</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>The use of previously assigned global variables is a little cringe-worthy, but it achieved our purpose, and while I'll make arguments for good practices all the time, the goal of this project was nifty colored lights, to be perfectly honest. Now that we know it works, we'll do some brief polishing (both on the script and the wiring ends, but especially on the interface -- these are in progress).</p>

<p><code>tmp</code> here is obviously a throwaway variable. But the list comprehensions in lines 7 and 9 in that snippet earned me a "that syntax is <em>slick</em>, I admit" from my not-so-much-a-Python-programmer friend. List comprehensions, they are excellent.</p>

<p>It's extremely explicit code in many ways, allowing for Pythonic syntax like the list comprehensions, but I think there's value in that kind of explicitness.</p>

<p>Finally, we needed a wrapper function to handle whether or not the special case was on, so everything would go off or on as appropriate before passing new values to the lights to turn them on/change properties of the input channels (e.g. color, brightness).</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">def</span> <span class="nf">lights_start</span><span class="p">(</span><span class="n">bright</span><span class="p">,</span><span class="n">red</span><span class="p">,</span><span class="n">green</span><span class="p">,</span><span class="n">blue</span><span class="p">,</span><span class="n">rotate</span><span class="p">,</span><span class="n">sp</span><span class="p">):</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="n">lights_do</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'><span class="n">lights_do</span><span class="p">(</span><span class="n">bright</span><span class="p">,</span><span class="n">red</span><span class="p">,</span><span class="n">green</span><span class="p">,</span><span class="n">blue</span><span class="p">,</span><span class="n">rotate</span><span class="p">,</span><span class="n">sp</span><span class="p">)</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>So, let's go back to the <code>handle()</code> method of the <code>MyTCPHandler</code> class:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">handle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="c"># self.rfile is a file-like object created by the handler</span>
</span><span class='line'><span class="c"># we can now use e.g. readline() instead of raw recv() calls</span>
</span><span class='line'><span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rfile</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span class='line'><span class="k">print</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="c"># see what&#39;s going on</span>
</span><span class='line'><span class="n">list_vals</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;,&quot;</span><span class="p">)]</span>
</span><span class='line'><span class="n">lights_start</span><span class="p">(</span><span class="o">*</span><span class="n">list_vals</span><span class="p">)</span>
</span><span class='line'><span class="c"># Likewise, self.wfile is a file-like object used to write back to the client</span>
</span><span class='line'><span class="bp">self</span><span class="o">.</span><span class="n">wfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;YES&quot;</span><span class="p">)</span> <span class="c"># acknowledge something&#39;s happening</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>When this script is served on the Raspberry Pi, wired to the lights in question, it can accept input from a client.</p>

<p>So this <code>handle()</code> method gets data: <code>self.data</code> .</p>

<p>We expect this to be a comma-separated string of six integer values: <code>bright, red, green, blue, rotate, sp</code> , as seen in <code>lights_start()</code> and <code>lights_do()</code> (above).</p>

<p>In line 4 in the snippet just above, <code>self.data = self.rfile.readline().strip()</code>, we take the arguments from the client and make them into a string stripped of whitespace on either end.</p>

<p>In line 6, <code>list_vals = [int(x) for x in self.data.split(",")]</code>, we split the string at the commas, into a list, making a list e.g. <code>['255','0','255','0','0','1']</code>. But each element of this list is of type <code>String</code>, so we use list comprehension syntax to make <code>list_vals</code> a list of integers (DMX expects integer values).</p>

<p>And in line 7, we call the function <code>lights_start()</code>, the wrapper function seen further above, which prepares to call <code>lights_do()</code> with any appropriate new values. We call it with the values passed to the server from the client: <code>*list_vals</code> is Python syntax to "unpack" an iterable like a list.</p>

<h2>the interface</h2>

<p>Wanting to make a quick web interface for sending the colors to the Pi server, we looked for a color picker wheel in JavaScript. Soon, the internet informed us that <code>color</code> is a built-in input value in HTML5.</p>

<p>"SWEET," I said. So, a hasty HTML form (we weren't playing designers here):</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;head&gt;&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;pre&gt;&lt;code&gt;</span><span class="ni">&amp;lt;</span>title<span class="ni">&amp;gt;</span>Pick a color<span class="ni">&amp;lt;</span>/title<span class="ni">&amp;gt;</span>
</span><span class='line'><span class="nt">&lt;/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;&lt;/head&gt;</span>
</span><span class='line'><span class="nt">&lt;body&gt;&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;pre&gt;&lt;code&gt;</span><span class="ni">&amp;lt;</span>form action=&quot;light.php&quot; method=&quot;post&quot;<span class="ni">&amp;gt;</span>
</span><span class='line'>    Choose Color:<span class="ni">&amp;lt;</span>br<span class="ni">&amp;gt;</span>
</span><span class='line'>    <span class="ni">&amp;lt;</span>input type=&quot;color&quot; name=&quot;color&quot;<span class="ni">&amp;gt;</span>
</span><span class='line'>    <span class="ni">&amp;lt;</span>br<span class="ni">&amp;gt;</span>
</span><span class='line'>    Brightness:
</span><span class='line'>    <span class="ni">&amp;lt;</span>br<span class="ni">&amp;gt;</span>
</span><span class='line'>    <span class="ni">&amp;lt;</span>input type=&quot;text&quot; name=&quot;bright&quot; value=&quot;255&quot;<span class="ni">&amp;gt;</span>
</span><span class='line'>    <span class="ni">&amp;lt;</span>br<span class="ni">&amp;gt;</span>
</span><span class='line'>    <span class="ni">&amp;lt;</span>input type=&quot;submit&quot; value=&quot;submit&quot;<span class="ni">&amp;gt;</span>
</span><span class='line'><span class="ni">&amp;lt;</span>/form<span class="ni">&amp;gt;</span>
</span><span class='line'><span class="nt">&lt;/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;&lt;/body&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>In the browser, this looks like:</p>

<p><img src="http://jaclynzetta.files.wordpress.com/2013/04/colorform_remotelighting.png"></p>

<p>We chose 255 as a default brightness, because that seemed overall most likely, and 0 -- black, or off, as a 'default' for all the color inputs.</p>

<p>(The special case options are not yet dealt with well in the interface, but that's easy enough to add, as would be a dropdown menu or slider for the brightness value, which here is just a text entry.)</p>

<p>That would get us a hex color value. We would need to convert that value to RGB. (The 0-255 integer values determining the colors -- of course, the input values for <code>red, green, blue</code> must always add up to 255 in total.) We decided to use PHP (mainly because my expertise, with regards to languages we used, was in Python, and my friend's, in PHP):</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">function</span> <span class="nf">hex2rgb</span><span class="p">(</span><span class="nv">$hex</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>   <span class="nv">$hex</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nv">$hex</span><span class="p">);</span><span class="o">&lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>   <span class="k">if</span><span class="p">(</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$hex</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span><span class="o">&lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span>  <span class="nv">$r</span> <span class="o">=</span> <span class="nx">hexdec</span><span class="p">(</span><span class="nx">substr</span><span class="p">(</span><span class="nv">$hex</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="nx">substr</span><span class="p">(</span><span class="nv">$hex</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">));</span>
</span><span class='line'>  <span class="nv">$g</span> <span class="o">=</span> <span class="nx">hexdec</span><span class="p">(</span><span class="nx">substr</span><span class="p">(</span><span class="nv">$hex</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="nx">substr</span><span class="p">(</span><span class="nv">$hex</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">));</span>
</span><span class='line'>  <span class="nv">$b</span> <span class="o">=</span> <span class="nx">hexdec</span><span class="p">(</span><span class="nx">substr</span><span class="p">(</span><span class="nv">$hex</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="nx">substr</span><span class="p">(</span><span class="nv">$hex</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">));</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nx">code</span><span class="o">&gt;&lt;/</span><span class="nx">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>   <span class="p">}</span> <span class="k">else</span> <span class="p">{</span><span class="o">&lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span>  <span class="nv">$r</span> <span class="o">=</span> <span class="nx">hexdec</span><span class="p">(</span><span class="nx">substr</span><span class="p">(</span><span class="nv">$hex</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">));</span>
</span><span class='line'>  <span class="nv">$g</span> <span class="o">=</span> <span class="nx">hexdec</span><span class="p">(</span><span class="nx">substr</span><span class="p">(</span><span class="nv">$hex</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">));</span>
</span><span class='line'>  <span class="nv">$b</span> <span class="o">=</span> <span class="nx">hexdec</span><span class="p">(</span><span class="nx">substr</span><span class="p">(</span><span class="nv">$hex</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">));</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nx">code</span><span class="o">&gt;&lt;/</span><span class="nx">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>   <span class="p">}</span>
</span><span class='line'>   <span class="nv">$rgb</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nv">$r</span><span class="p">,</span> <span class="nv">$g</span><span class="p">,</span> <span class="nv">$b</span><span class="p">);</span>
</span><span class='line'>   <span class="c1">//return implode(&quot;,&quot;, $rgb); // returns the rgb values separated by commas</span>
</span><span class='line'>   <span class="k">return</span> <span class="nv">$rgb</span><span class="p">;</span> <span class="c1">// returns an array with the rgb values</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>So if a color was chosen on the interface, then we wanted to POST that RGB information, and whatever brightness was selected, to the server:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">])</span> <span class="p">{</span> <span class="c1">// if-statement begins&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="nv">$color</span> <span class="o">=</span> <span class="nx">hex2rgb</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]);</span>
</span><span class='line'><span class="nv">$bright</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;bright&#39;</span><span class="p">];</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nx">code</span><span class="o">&gt;&lt;/</span><span class="nx">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>and, still in this if-statement, turn the returned array from <code>hex2rgb()</code> to a string separated by commas. The quick-n-dirty way:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="nv">$out</span> <span class="o">=</span> <span class="nv">$bright</span> <span class="o">.</span> <span class="s1">&#39;,&#39;</span> <span class="o">.</span> <span class="nv">$color</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">.</span> <span class="s1">&#39;,&#39;</span> <span class="o">.</span> <span class="nv">$color</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">.</span> <span class="s1">&#39;,&#39;</span> <span class="o">.</span> <span class="nv">$color</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">.</span> <span class="s1">&#39;,255,0&#39;</span><span class="p">;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nx">code</span><span class="o">&gt;&lt;/</span><span class="nx">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Then we create a file pointer to the open socket, and pass it the IP address of the Raspberry Pi and the appropriate port (which in our case, as you can see earlier in the post, was port 9999):</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="nv">$fp</span> <span class="o">=</span> <span class="nb">fsockopen</span><span class="p">(</span><span class="s1">&#39;xxx.xxx.xx.xx&#39;</span><span class="p">,</span><span class="s1">&#39;9999&#39;</span><span class="p">);</span> <span class="c1">// x-es represent the pi IP</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nx">code</span><span class="o">&gt;&lt;/</span><span class="nx">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>And write it to the server:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="nb">fwrite</span><span class="p">(</span><span class="nv">$fp</span><span class="p">,</span> <span class="nv">$out</span><span class="p">);</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nx">code</span><span class="o">&gt;&lt;/</span><span class="nx">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">}</span> <span class="c1">// if-statement ends here</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Hooray! I don't have pictures, but it was pretty great.</p>

<p>We had a lot of fun with this project, and I think it's only made better by the facts that (a) we said 'hey, let's do this' and went and made it happen, and (b) this kind of reasonably simple affecting one's physical environment in fun ways using capabilities of a <a href="http://www.raspberrypi.org/faqs">Raspberry Pi</a> is, like the workshop with LEDs and photo sensors I briefly referred to the other day, a great way to show kids the possibilities that are available by learning a little bit about electronics and programming. Which are also GREAT, oh man.</p>

<p>Here's where the value I mentioned in explicit code comes in: it's great that it's easy to read what's happening without shoving too much information into one line, but it's even better that this makes it easy to explain, and thus easier to teach.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[instabitly]]></title>
    <link href="http://aerenchyma.github.io/blog/2013/03/25/instabitly/"/>
    <updated>2013-03-25T00:29:00-04:00</updated>
    <id>http://aerenchyma.github.io/blog/2013/03/25/instabitly</id>
    <content type="html"><![CDATA[<p>Quick drive-by: <a href="https://github.com/aerenchyma/instabitly">instabitly</a>, a script I wrote recently to import saved links from <a href="http://instapaper.com">Instapaper</a> to <a href="https://bitly.com/">bit.ly</a>.</p>

<p>I did it for personal reasons -- primarily because I want all this stuff stored redundantly. Obviously I haven't solved that problem in its entirety, but there were also other reasons. Because I care about things like this. There's a README. More, like more in the other documentation series I've discussed so far, will have to appear after recent projects calm down some.</p>

<p>Let me also take this opportunity to encourage you to <a href="http://www.instapaper.com/subscription">support Instapaper</a> if you can and it's a service you like/use.</p>

<p>In my imaginary free time, I have been trying to absorb all the <a href="http://pyvideo.org/category/33/pycon-us-2013">fantastic PyCon</a> <a href="https://speakerdeck.com/pyconslides">talks</a> (I have an active imagination).</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[what hacker school is like (or, what I did this summer)]]></title>
    <link href="http://aerenchyma.github.io/blog/2012/08/15/what-hacker-school-is-like/"/>
    <updated>2012-08-15T07:48:00-04:00</updated>
    <id>http://aerenchyma.github.io/blog/2012/08/15/what-hacker-school-is-like</id>
    <content type="html"><![CDATA[<p>Last May, when I was first thinking about applying to <a href="http://www.hackerschool.com">Hacker School</a>, I did a lot of searching for posts and tweets about it. I wanted to know what the experience was like, the day-to-day, the people. I found some, and <a href="https://www.hackerschool.com/about" target="_blank">the website does give a very accurate picture</a> of <a href="https://www.hackerschool.com/testimonials" target="_blank">the environment</a> around all the time at Hacker School, but I wished for more because I'm curious, especially about the environment alongside the programming. Hacker School is all about being a better programmer -- going after that goal has come with a lot of side pluses.</p>

<p>(There's now <a href="http://www.reddit.com/r/IAmA/comments/y7kld/iama_hacker_at_hacker_school_in_nyc_ama/">an IAmA for Hacker School going on @ Reddit</a>, where a bunch of current Hackerschoolers and alums are articulately answering questions. So you should go there.)</p>

<p>First, I'd say that if you have a real inclination to apply -- if you think you might love programming -- if the sound of Hacker School interests you -- do it. Do it soon, do it now! <a href="http://www.hackerschool.com/apply">Just click here</a>! I understand that moving to NYC on somewhat quick notice is intimidating, that you're not sure what will happen with work or other potential commitments, that maybe the cost is concerning, but I swear the facilitators and even your fellow batch-mates (especially if there are people coming back who are familiar with the process!) are incredibly helpful with that stuff, in particular with finding housing. It's workable, not so bad, even without much stress!, and having the option is worth the application time.</p>

<p>If you're a woman who needs financial assistance, I can't emphasize enough, <i>don't</i> hesitate because you're afraid it won't work out! This batch, every accepted woman who requested a grant received one, and there's no reason to believe that won't happen again.</p>

<p>Secondly, here's another addition to the growing library of 'what it's like at Hacker School'. As we approach the end of batch[3] -- (numbers started at 0, of course), I'm just gonna list you some things I did this summer, in no particular order.</p>

<ul>
<li><p>Spent a wholly worthwhile thirteen total out of about forty hours in Central Park one Thursday - Friday. Most of those were waiting in line for tickets to As You Like It in the Park. Many of those hours were talking and laughing with a Hacker School friend. Some were making an attempt at a picnic at sunrise. Some of them were us programming in Python in a text editor and REPL with an Android phone. (Three of the hours were at night, watching the show, which was one of the best Shakespeare performances I've ever seen.)</p></li>
<li><p>Played in a Hacker School Ping Pong tournament. (No requirement to be especially good. Hence &lt;-- .) The first Ping Pong tournament, a laptop was pulled out midway through... now, there is a relative-player-ranking system that a fellow Hackerschooler implemented.</p></li>
<li><p>Almost made it to building and launching homemade water rockets.</p></li>
<li><p>Went on an 11-person, 120-total-dumpling tour in Chinatown. Wandered for hours below 14th street talking about fascinating things incl. translations of brand names and living in different areas of the country. (...not on the same day.)</p></li>
<li><p>Got delicious Malaysian food, tasted the best guacamole of my life, ventured to Long Island for a cupcake baked by an awesome fellow Hackerschooler (worth the trip!). I&#039;ve eaten crazy delicious stuff while in New York [and most of it wasn't too expensive + in good company].</p></li>
<li><p>Had many dinners and lunches and otherwise hanging out with alums, current batch members, Hacker School facilitators wherein there were discussions of topics ranging from the structure of Git, to islands in the Pacific where time is measured differently, to what is nerve-wracking about interviews, to the best kind of chocolate (no consensus), to what we were like as teenagers in various capacity, to awesome books recently read, to the differences between ricotta, queso fresco and paneer.</p></li>
<li><p>Collapsed laughing over the packaging of bear-shaped cookies sold at a nearby cafe during a quick programming break. Began to learn Cued Speech. Ran outside to dance around in a sudden rainstorm by the Brooklyn Bridge.</p></li>
<li><p>Got basically addicted to iced coffee: people at a nearby cafe* have started recognizing some of our orders; we joke about it, slash about how many times we've been there. <s>Each day.</s> I've been there a...lot. (Coffee ice cubes in the iced coffee/espresso drinks. Need I say more.)</p></li>
<li><p>Learned tons about parsing, web scraping, Ruby, dealing with dynamic web content, tree- and graph-traversal algorithms, multiple web frameworks, client-side Javascript debugging, how to structure my time, how to read a large code base better, short presentations, window managers, various contributions to open source projects, awesome <a href="http://en.wikipedia.org/wiki/REPL">REPL</a>s, how to use Git well (and <a href="http://marthakelly.github.com/blog/2012/06/04/hacker-school-day-one/" target="_blank">don't worry at all</a> if you don't know about any one or any of those things). Also, about baking, varieties of international visas, mapping, moving, chemicals, New York, regions of the US, circuits, public speaking, work environments, acidic agents in cheese-making and tons of other things; that's not a comprehensive list. I'm going back to school (for grad school in CS) in the fall (this was already a plan when I applied to Hacker School), but I now feel solidly on a trajectory to doing whatever the hell I want, and learning whatever that requires, in a way I did not at the beginning of June. (I've also gained an even more thorough respect for transportation networks, something I already loved a lot.) Seeing pairs of people attempt things totally new to them and be ridiculous successful while you and others do the same at the next table is the best.</p></li>
<li><p>Met some of the most impressive and inspiring thinkers, programmers, cooks, writers, feminists, and <i>people</i> I've ever met at once. I've made really good friends with whom I've done lots of entirely random and excellent things, who have changed how I think about things spanning-realms-within and far-beyond programming, and I'm not planning to disappear -- I'll be back to visit.</p></li>
<li><p>More than a year later, I come back to this post, and while I have plenty to add, the most important cultural thing I can say about Hacker School now is that not only do I continue to realize things I gained in the summer of 2012, programming and other-wise, but on numerous trips around the country (the US, in my case), it's often Hacker Schoolers in all these cities that make them feel a little bit like home.</p></li>
</ul>


<p>You should probably apply. If you read this you should apply. (If you didn't, and you enjoy programming, you should also apply, but that's probably not relevant at this juncture.)</p>
]]></content>
  </entry>
  
</feed>
